<!DOCTYPE html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>DP Moto - Minimal Test</title></head>
<body style="background:#000;color:#0f0;font-family:monospace;padding:20px">
<h2>iPhone Xs Diagnostic</h2>
<div id="log"></div>
<script>
var log = document.getElementById('log');
function L(msg) { log.innerHTML += msg + '<br>'; }

L('1. Page loaded');
L('UA: ' + navigator.userAgent.substring(0, 60));
L('Screen: ' + screen.width + 'x' + screen.height);
L('Memory: ' + (navigator.deviceMemory || 'unknown') + ' GB');
L('Touch: ' + navigator.maxTouchPoints);
L('DPR: ' + window.devicePixelRatio);

// Test 2: Can we create a canvas?
try {
  var c = document.createElement('canvas');
  c.width = 1920; c.height = 1080;
  L('2. Canvas 1920x1080 created OK');
} catch(e) { L('2. Canvas FAILED: ' + e.message); }

// Test 3: WebGL context?
try {
  var gl = c.getContext('webgl2') || c.getContext('webgl');
  if (gl) {
    L('3. WebGL OK: ' + gl.getParameter(gl.RENDERER));
    L('   Max texture: ' + gl.getParameter(gl.MAX_TEXTURE_SIZE));
    L('   Max viewport: ' + gl.getParameter(gl.MAX_VIEWPORT_DIMS));
  } else {
    L('3. WebGL FAILED: no context');
  }
} catch(e) { L('3. WebGL FAILED: ' + e.message); }

// Test 4: Memory allocation test
try {
  var arrays = [];
  var totalMB = 0;
  for (var i = 0; i < 50; i++) {
    arrays.push(new ArrayBuffer(1024 * 1024)); // 1MB each
    totalMB++;
  }
  L('4. Allocated ' + totalMB + 'MB RAM OK');
  arrays = null; // free
} catch(e) { L('4. Memory failed at ' + totalMB + 'MB: ' + e.message); }

// Test 5: Load Phaser (if available)
L('5. Tests complete. Page alive at ' + new Date().toISOString());

// Heartbeat
var beats = 0;
setInterval(function() {
  beats++;
  L('Heartbeat #' + beats + ' (' + beats + 's alive)');
}, 1000);
</script>
</body></html>
